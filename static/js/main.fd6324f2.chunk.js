(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(n,e,o){"use strict";o.r(e);var a=o(0),i=o(4),t=(o(8),o(1)),s=o.n(t),r=o(5),w=o.n(r);o(2),o(11),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=o(6),d=o.n(c);s.a.subscribe("main.initialized",function(n,e){for(var o=e.scene,i=new a.Geometry,t=0;t<1e4;t++){var r=new a.Vector3;r.x=a.Math.randFloatSpread(1e5*Math.random()),r.y=a.Math.randFloatSpread(1e4*Math.random()),r.z=a.Math.randFloatSpread(2e4*Math.random()),i.vertices.push(r)}var w=new a.PointsMaterial({color:8947848}),c=new a.Points(i,w);s.a.publish("stars.loaded",{stars:c}),o.add(c)}),o.d(e,"CONFIG",function(){return l}),o.d(e,"DEFAULTS",function(){return u}),o.d(e,"DATA",function(){return h});var l={isTouchDevice:function(){var n=" -webkit- -moz- -o- -ms- ".split(" ");return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)||function(n){return window.matchMedia(n).matches}(["(",n.join("touch-enabled),("),"heartz",")"].join(""))}()},u={postprocessing:!l.isTouchDevice,antialias:!l.isTouchDevice,sizeRatio:l.isTouchDevice?3:1,aspectRatio:window.innerWidth/window.innerHeight,CPUCores:navigator.hardwareConcurrency},h={stars:void 0,xwing:void 0,trench:void 0,orbitControls:void 0},p={leftIsDown:!1,upIsDown:!1,rightIsDown:!1,downIsDown:!1,ctrlIsDown:!1,spaceIsDown:!1,inFullscreen:!1};(new d.a).load("/models/xwing/scene.gltf",function(n){s.a.publish("models.xwing.loaded",{gltf:n})},function(n){console.log(n.loaded/n.total*100+"% loaded"),s.a.publish("models.xwing.loading",{xhr:n})},function(n){console.log("An error happened")});var m=new a.Scene,g=new a.PerspectiveCamera(75,u.aspectRatio,.1,5e3);g.position.x=0,g.position.y=0,g.position.z=30;var D=new a.WebGLRenderer({antialias:u.antialias});D.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(D.domElement),D.setPixelRatio(window.devicePixelRatio),D.gammaInput=!0,D.gammaOutput=!0;var v=new a.SpotLight(16777215);v.position.set(100,1e3,100),v.target.position.set(0,0,0),v.castShadow=!0,v.shadow.camera.near=50,v.shadow.camera.far=150,m.add(v);var x=new a.AmbientLight(1118481,.6);m.add(x);new w.a;s.a.subscribe("models.xwing.loaded",function(n,e){h.xwing=e.gltf.scene,m.add(h.xwing)}),s.a.publish("main.load.models.xwing",{}),s.a.subscribe("stars.loaded",function(n,e){h.stars=e.stars,h.stars.position.y=500,m.add(h.stars)});var f,b=0,I=0,k=0;l.isTouchDevice||(f=p,document.addEventListener("keyup",function(n){switch(n.key){case"ArrowLeft":f.leftIsDown=!1;break;case"ArrowUp":f.upIsDown=!1;break;case"ArrowRight":f.rightIsDown=!1;break;case"ArrowDown":f.downIsDown=!1;break;case"Control":f.ctrlIsDown=!1;break;case"Space":f.spaceIsDown=!1}}),document.addEventListener("keydown",function(n){switch(n.key){case"ArrowLeft":f.leftIsDown=!0;break;case"ArrowUp":f.upIsDown=!0;break;case"ArrowRight":f.rightIsDown=!0;break;case"ArrowDown":f.downIsDown=!0;break;case"Control":f.ctrlIsDown=!0;break;case"Space":f.spaceIsDown=!0}})),Object(i.a)(D,g),function n(){requestAnimationFrame(n),D.render(m,g),function(){var n=(new Date).getTime();if(l.delta=n-b,b=n,(l.delta>1e3||0===l.delta)&&(l.delta=1e3/60),h.xwing){var e=l.delta/16,o=Math.max(8,12/e),a=50*k,i=(100*I-h.xwing.position.x)/o,t=(a-h.xwing.position.y)/o;h.xwing.position.x+=i,h.xwing.position.y+=t,i=Math.min(i,20),i=Math.max(i,-20),t=Math.min(t,20),t=Math.max(t,-20),h.xwing.rotation.x=t/30,h.xwing.rotation.y=-i/30+Math.PI,h.xwing.rotation.z=i/30,p.leftIsDown&&(I-=.003*l.delta),p.rightIsDown&&(I+=.003*l.delta),p.upIsDown&&(k+=.003*l.delta),p.downIsDown&&(k-=.003*l.delta),I<-1&&(I=-1),I>1&&(I=1),k<-1&&(k=-1),k>1&&(k=1),g.position.x=h.xwing.position.x,g.position.y=h.xwing.position.y}}()}(),s.a.publish("main.initialized",{camera:g,scene:m}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()})},7:function(n,e,o){n.exports=o(16)}},[[7,1,2]]]);
//# sourceMappingURL=main.fd6324f2.chunk.js.map